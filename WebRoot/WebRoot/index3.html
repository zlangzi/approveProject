
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="gbtags.com">
<title>科技部科技项目审批系统</title>
<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
<!-- Fonts -->
<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet"
	type="text/css">
<link href="css/animate.css" rel="stylesheet" />
<!-- Squad theme CSS -->
<link href="css/style.css" rel="stylesheet">
<link href="color/default.css" rel="stylesheet">
<link rel="stylesheet" href="css/common.css" />
<!-- 基本样式 -->
<link href="css/bootstrap-responsive.min.css" rel="stylesheet" />
<link href="css/bwizard.min.css" rel="stylesheet" />
</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-custom">
	<!-- Preloader -->
	<div id="preloader">
		<div id="load"></div>
	</div>
	<nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header page-scroll">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-main-collapse">
					<i class="fa fa-bars"></i>
				</button>
				<a class="navbar-brand" href="index.html">
					<h1>科技部科技项目审批系统</h1>
				</a>
			</div>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div
				class="collapse navbar-collapse navbar-right navbar-main-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a href="index.html#intro">首页</a></li>
					<li><a href="index.html#about">科技资讯</a></li>
					<li><a href="index.html#service">审批流程</a></li>

					<li id="" class="dropdown">
					
					<a href="#"	class="dropdown-toggle user-a" data-toggle="dropdown">登陆|注册</a>
						<ul class="dropdown-menu user-ul" style="min-width: 97px">
							<li><a href="#" class="rotateInDownRight dialog">注册</a></li>
							<li><a href="#" class="rotateInDownRight login-dialog">登录</a></li>
						</ul>
					</li>

				</ul>
			</div>
		</div>
		<!-- /.container -->
	</nav>
	<!-- Section: intro -->
	<section id="intro" class="intro">
		<div class="slogan">
			<h2>
				欢迎来到 <span class="text_color">STPAS</span>
			</h2>
			<h4>科技部科技项目审批系统</h4>
		</div>
		<div class="page-scroll">
			<a href="#about" class="btn btn-circle"> <i
				class="fa fa-angle-double-down animated"></i>
			</a>
		</div>
	</section>
	<!-- /Section: intro -->
	<!-- Section: about -->
	<section id="about" class="home-section text-center">
		<div class="heading-about">
			<div class="container">
				<div class="row">
					<div class="col-lg-8 col-lg-offset-2">
						<div class="wow bounceInDown" data-wow-delay="0.4s">
							<div class="section-heading">
								<h2>科技咨询</h2>
								<i class="fa fa-2x fa-angle-down"></i>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container" style="text-align: left">
			<div id="wizard">
				<ol>
					<li>通知公告</li>
					<li>科技动态</li>
					<li>处室概况</li>
					<li>办事指南</li>
				</ol>
				<div>
					<ul id="1">
						
					</ul >
				</div>
				<div>
					<ul id="2">
						
					</ul>
				</div>
				<div>
					<ul id="3">
						
					</ul>
				</div>
				<div>
					<ul id="4">
						
					</ul>
				</div>
			</div>
		</div>
	</section>
	<!-- /Section: about -->
	<!-- Section: services -->
	<section id="service" class="home-section text-center bg-gray">
		<div class="heading-about">
			<div class="container">
				<div class="row">
					<div class="col-lg-8 col-lg-offset-2">
						<div class="wow bounceInDown" data-wow-delay="0.4s">
							<div class="section-heading">
								<h2>审批流程</h2>
								<i class="fa fa-2x fa-angle-down"></i>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container">
			<div class="row">
				<div class="col-lg-2 col-lg-offset-5">
					<hr class="marginbot-50">
				</div>
			</div>
			<div class="row">
				<div class="col-sm-3 col-md-3">
					<div class="wow fadeInLeft" data-wow-delay="0.2s">
						<div class="service-box">
							<div class="service-icon">
								<img src="img/icons/service-icon-1.png" alt="" />
							</div>
							<div class="service-desc">
								<h5>注册登录</h5>
								<p>注册登录</p>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-3 col-md-3">
					<div class="wow fadeInUp" data-wow-delay="0.2s">
						<div class="service-box">
							<div class="service-icon">
								<img src="img/icons/service-icon-2.png" alt="" />
							</div>
							<div class="service-desc">
								<h5>身份验证</h5>
								<p>身份验证</p>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-3 col-md-3">
					<div class="wow fadeInUp" data-wow-delay="0.2s">
						<div class="service-box">
							<div class="service-icon">
								<img src="img/icons/service-icon-3.png" alt="" />
							</div>
							<div class="service-desc">
								<h5>递交审核申请</h5>
								<p>递交审核申请</p>
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-3 col-md-3">
					<div class="wow fadeInRight" data-wow-delay="0.2s">
						<div class="service-box">
							<div class="service-icon">
								<img src="img/icons/service-icon-4.png" alt="" />
							</div>
							<div class="service-desc">
								<h5>等待结果</h5>
								<p>等待结果</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- /Section: services -->



	<div id="HBox">
		<form  id="regForm" name="usesr">
			<ul class="list">
				<li><strong>用户名 <font color="#ff0000">*</font></strong>
					<div class="fl">
						<input type="text" name="username" value="" class="ipt username" />
					</div></li>
				<li><strong>密 码 <font color="#ff0000">*</font></strong>
					<div class="fl">
						<input type="password" name="password" value=""
							class="ipt password" />
					</div></li>
				<li><strong>请再次输入密码 <font color="#ff0000">*</font></strong>
					<div class="fl">
						<input type="password" name="password2" value=""
							class="ipt password2" />
					</div></li>
				<li><strong>姓 名 <font color="#ff0000">*</font></strong>
					<div class="fl">
						<input type="text" name="name" value="" class="ipt name" />
					</div></li>
				<li><strong>性 别 <font color="#ff0000">*</font></strong>

					<div class="fl">
						<label class="mr10"> <input type="radio" name="gender"
							value="1" checked="" />男
						</label> <label class="mr10"> <input type="radio" name="gender"
							value="2" />女
						</label>

					</div></li>
				<li><strong>身份证 <font color="#ff0000">*</font></strong>
					<div class="fl">
						<input type="text" name="idcard" value="" class="ipt idcard" />
					</div></li>
				<li><strong>手 机 <font color="#ff0000">*</font></strong>
					<div class="fl">
						<input type="text" name="phone" value="" class="ipt phone" />
					</div></li>
				<li><strong>邮 箱 <font color="#ff0000">*</font></strong>
					<div class="fl">
						<input type="text" name="email" value="" class="ipt email" />
					</div></li>



				<li><input type="button" value="确认提交"
					class="submitBtn signup-action" /></li>
			</ul>
		</form>
	</div>
	<!-- HBox end -->
	<div id="HBox2">
		<form id="loginForm">
			<ul class="list">
				<li><strong>用户名 <font color="#ff0000">*</font></strong>
					<div class="f1">
						<input type="text" name="usernameLog" value=""
							class="ipt username-log" />
					</div></li>
				<li><strong>密 码 <font color="#ff0000">*</font></strong>
					<div class="f1">
						<input type="password" name="passwordLog" value=""
							class="ipt password-log" />
					</div></li>

				<li>
					<input type="button" value="确认提交"
					class="submitBtn login-action"  >
				</li>
			</ul>
		</form>
	</div>
	<!-- HBox end -->

	<footer>
		<div class="container">
			<div class="row">
				<div class="col-md-12 col-lg-12">
					<div class="wow shake" data-wow-delay="0.4s">
						<div class="page-scroll marginbot-30">
							<a href="#intro" id="totop" class="btn btn-circle"> <i
								class="fa fa-angle-double-up animated"></i>
							</a>
						</div>
					</div>
					<p>&copy;Copyright 2016-9-7 All rights reserved.</p>
					<p
						style="color: #FFF; font-family: 'microsoft yahei', Arial, sans-serif;">智慧熊出品</p>
				</div>
			</div>
		</div>
	</footer>
	<!-- Core JavaScript Files -->
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery.easing.min.js"></script>
	<script src="js/jquery.scrollTo.js"></script>
	<script src="js/wow.min.js"></script>
	<!-- Custom Theme JavaScript -->
	<script src="js/custom.js"></script>
	<script src="js/jquery.hDialog.js"></script>
	<script src="js/bwizard.min.js" type="text/javascript"></script>
	<script type="text/javascript">
    $("#wizard").bwizard();
    </script>
	<script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fac45a0f68a119fbe4d1c4c3ac3044dbd' type='text/javascript'%3E%3C/script%3E"));
    </script>
<!--     资讯加载JS -->
    <script type="text/javascript">
    $(function(){
    	$.get("getAllInfos.action",function(data,status){
    		for(var i=1;i<=4;i++){
				$('#'+i).remove('li');
			}
    		console.log(data);
    		if(data!=""){
    			for(var i=0;i<data.length;i++){
    				$('#'+data[i].type_id).append("<li><a href='#"+data[i].id+"'>"+data[i].title+"</a></li>")
    			}
    		}
    		
    	})
    	
    	
    })
    
    </script>
	<script>
	var EmailReg = /^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/; //邮件正则
    var PhoneReg = /^0{0,1}(13[0-9]|15[0-9]|153|156|18[1-9])[0-9]{8}$/ ; //手机正则
    var passwordReg = /^[a-z0-9_-]{6,18}$/;
    var usernameReg = /^[a-z0-9_-]{3,16}$/;
    var idcardReg = /^(\d{15}$|^\d{18}$|^\d{17}(\d|X|x))$/;
    var $username = $('.username');
    var $password = $('.password');
    var $password2 = $('.password2');
    var $name = $('.name');
    var $gender = $('.gender');
    var $idcard = $('.idcard');
    var $phone = $('.phone');
    var $email = $('.email');
    var $e1 = $('.dialog');
    var usernameCheck=false;
        $(function(){
            
            $e1.hDialog({
                title: '基本用户注册',
                width:400,
                height: 500,

                resetForm: false,
                position: 'top'
            });
            
            $username.blur(function() {
                /* Act on the event */
                if($username.val() == ''){
                    $.tooltip('用户名还没填呢...');
                }else if(!usernameReg.test($username.val())){
                    $.tooltip('请输入3到18位，字母或数字的组合的用户名...')
                }else{
                	isAviliable($username.val());
                }
                	
            });

            $password.blur(function() {
                /* Act on the event */
                if($password.val() == ''){
                    $.tooltip('密码还没填呢...');
                }else if(!passwordReg.test($password.val())){
                     $.tooltip('请输入6到18位，字母或数字的组合的密码...');
                }
            });

            $password2.blur(function() {
                /* Act on the event */
                if($password2.val() != $password.val()){
                    $.tooltip('请输入相同的密码...');
                }
            });
            $name.blur(function() {
                /* Act on the event */
                if($name.val() == ''){
                    $.tooltip('姓名还没填呢...');
                }
            });
            $idcard.blur(function() {
                /* Act on the event */
                if($idcard.val() == ''){
                    $.tooltip('身份证号还没填呢...');
                }else if(!idcardReg.test($idcard.val())){
                    $.tooltip('请输入正确的身份证号码...');
                }
            });
            $phone.blur(function() {
                /* Act on the event */
                if($phone.val() == ''){
                    $.tooltip('电话号还没填呢...');
                }else if(!PhoneReg.test($phone.val())){
                    $.tooltip('请输入正确的电话号码...');
                }
            });
            $email.blur(function() {
                /* Act on the event */
                if($email.val() == ''){
                    $.tooltip('邮箱还没填呢...');
                }else if(!EmailReg.test($email.val())){
                    $.tooltip('请输入正确的邮箱...');
                }
            });
            //注册按钮点击事件
            $('.signup-action').click(function(){
            	//验证通过，提交表单，异步提交
            	if(reg_check()){
            		
            		$.post("register.action",
            				$('#regForm').serialize(),
            				function(success){
            					if(success=="success"){
            						getSession();
            						$e1.hDialog('close',{box:'#HBox'});
	           		                $.tooltip('注册成功!',2000,true);
	           		                 
            					}
            					else{
            						$.tooltip('注册失败!',2000,false);
            					}
            		});
            	}
            });
        });
        //注册验证
        function reg_check() {

            if($username.val() == ''){
                $.tooltip('用户名还没填呢...');
                return false;
            }else if(!usernameReg.test($username.val())){
                $.tooltip('请输入3到18位，字母或数字的组合的用户名...')
                return false;
            }else if($password.val() == ''){
                $.tooltip('密码还没填呢...');
                return false;
            }else if(!passwordReg.test($password.val())){
                 $.tooltip('请输入6到18位，字母或数字的组合的密码...');
                 return false;
            }else if($password2.val() != $password.val()){
                $.tooltip('请输入相同的密码...');
                return false;
            }else if($name.val() == ''){
                $.tooltip('姓名还没填呢...');
                return false;
            }else if($idcard.val() == ''){
                $.tooltip('身份证号还没填呢...');
                return false;
            }else if(!idcardReg.test($idcard.val())){
                $.tooltip('请输入正确的身份证号码...');
                return false;
            }else if($phone.val() == ''){
                $.tooltip('电话号还没填呢...');
                return false;
            }else if(!PhoneReg.test($phone.val())){
                $.tooltip('请输入正确的电话号码...');
                return false;
            }else if($email.val() == ''){
                $.tooltip('邮箱还没填呢...');
                return false;
            }else if(!EmailReg.test($email.val())){
                $.tooltip('请输入正确的邮箱...');
                return false;
            }else{
				if(usernameCheck){
					return true;
				}
				else{
					$.tooltip("用户名已存在",2000,false);
					return false;
				}
				
            	
            }
        }
        function isAviliable(username){
        	
        	$.post("checkUsername.action",{username:username},function(data){
        		if(data=="OK"){
        			usernameCheck= true;
        		}
        		else{
        			
        			usernameCheck= false;
        		}
        	});
        	
        }

    </script>
	<script>
	var passwordReg = /^[a-z0-9_-]{6,18}$/;
    var usernameReg = /^[a-z0-9_-]{3,16}$/;
    var $usernamelog = $('.username-log');
    var $passwordlog = $('.password-log');
        $(function(){
            var $e2 = $('.login-dialog');
            $e2.hDialog({
                box: '#HBox2',
                title: '用户登录',

            });
            
            $usernamelog.blur(function() {
                /* Act on the event */
                if($usernamelog.val() == ''){

                    $.tooltip('用户名还没填呢...');
                }else if(!usernameReg.test($usernamelog.val())){
                    $.tooltip('请输入3到18位，字母或数字的组合的用户名...')
                }
            });

            $passwordlog.blur(function() {
                /* Act on the event */
                if($passwordlog.val() == ''){
                    $.tooltip('密码还没填呢...');
                }else if(!passwordReg.test($passwordlog.val())){
                     $.tooltip('请输入6到18位，字母或数字的组合的密码...');
                }
            });
//          登陆
            $('.login-action').click(function() {
            	if(login_check()){
            	$.post("login.action",$("#loginForm").serialize(),function(data){
            		if(data!=null){
            			getSession ();
						$e2.hDialog('close',{box:'#HBox2'});
            		}
            	})
            	}
            });
            getSession ();
        });
//      login form data check
        function login_check() {
            if($usernamelog.val()==""){
                $.tooltip('用户名还没填呢...');
                return false;
            }else if(!usernameReg.test($usernamelog.val())){
                $.tooltip('请输入3到18位，字母或数字的组合的用户名...')
                return false;
            }else if($passwordlog.val() == ''){
                $.tooltip('密码还没填呢...');
                return false;
            }else if(!passwordReg.test($passwordlog.val())){
                 $.tooltip('请输入6到18位，字母或数字的组合的密码...');
                 return false;
            }else{
				return true;
            }
        }
        //访问session中的参数，页面登录状态保持
       function getSession (){
    	   $.get("getSession.action",function(data){
    		   	console.log(data=="");
    			   changeStatus(data);
    		   
    		   	
    	   });
       }
        function changeStatus(data){
        	if(data!=""){
        	var e3  = $('.user-ul');
            e3.remove();
            var e5 = $(".user-a");
            e5.html(data.username);
            e5.attr('href', '#');
        	}
        }
        
    </script>
</body>

</html>
